<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slinmex – Anamnese rápida</title>
  <meta name="description" content="Pré-anamnese obrigatória (2 minutos). Envie no WhatsApp e siga para o agendamento." />
  <link rel="icon" href="/favicon.ico" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .container{max-width:900px}
    .hint{font-size:.75rem;color:#6b7280}
  </style>
</head>
<body class="bg-gradient-to-b from-slate-50 to-white text-slate-800">
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <a href="./" class="flex items-center gap-2 no-underline hover:opacity-90" aria-label="Página inicial">
        <div class="h-9 w-9 rounded-xl bg-slate-900 text-white grid place-items-center font-bold">SX</div>
        <span class="font-semibold">Slinmex</span>
      </a>
      <div class="text-sm text-slate-500">Anamnese rápida</div>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <h1 class="text-2xl md:text-3xl font-bold">Pré‑anamnese (obrigatória)</h1>
    <p class="mt-2 text-slate-600">Leva menos de 2 minutos. <strong>Todas as perguntas “Sim/Não” são obrigatórias</strong>. Ao enviar, abriremos o WhatsApp com o resumo e o Calendly para agendamento.</p>

    <form id="f" class="mt-6 space-y-6">
      <section class="rounded-2xl border p-4">
        <h2 class="text-sm font-semibold text-slate-800">1) Identificação</h2>
        <div class="mt-3 grid md:grid-cols-2 gap-3">
          <label class="block text-sm">
            <span class="text-slate-700">Nome completo</span>
            <input required type="text" id="nome" class="mt-1 w-full rounded-xl border px-3 py-2" placeholder="Ex.: Ana Silva" autocomplete="name" />
          </label>
          <label class="block text-sm">
            <span class="text-slate-700">Idade</span>
            <input required type="number" min="10" max="100" id="idade" class="mt-1 w-full rounded-xl border px-3 py-2" placeholder="Ex.: 36" />
          </label>
        </div>
      </section>

      <section class="rounded-2xl border p-4">
        <h2 class="text-sm font-semibold text-slate-800">2) Medidas</h2>
        <div class="mt-3 grid md:grid-cols-3 gap-3">
          <label class="block text-sm">
            <span class="text-slate-700">Peso (kg)</span>
            <input required type="number" id="peso" class="mt-1 w-full rounded-xl border px-3 py-2" placeholder="Ex.: 84,5" step="0.1" min="20" max="400" />
          </label>
          <label class="block text-sm">
            <span class="text-slate-700">Altura</span>
            <div class="flex gap-2">
              <input required type="number" id="altura" class="mt-1 w-full rounded-xl border px-3 py-2" placeholder="cm ou m" step="0.01" min="0.5" max="250" />
              <select id="alturaUn" class="mt-1 rounded-xl border px-2 py-2">
                <option value="auto" selected>auto</option>
                <option value="cm">cm</option>
                <option value="m">m</option>
              </select>
            </div>
            <small class="hint">Digite 170 (cm) ou 1.70 (m). Em "auto" detectamos.</small>
          </label>
          <label class="block text-sm">
            <span class="text-slate-700">IMC</span>
            <input type="text" id="imc" class="mt-1 w-full rounded-xl border px-3 py-2 bg-slate-50" placeholder="—" readonly />
          </label>
        </div>
      </section>

      <section class="rounded-2xl border p-4">
        <h2 class="text-sm font-semibold text-slate-800">3) Comorbidades (Sim/Não obrigatório)</h2>
        <div class="mt-2 grid md:grid-cols-2 gap-6">
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">Hipertensão (HAS)</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="has" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="has" value="NÃO"> Não</label>
          </fieldset>
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">Diabetes (DM)</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="dm" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="dm" value="NÃO"> Não</label>
          </fieldset>
        </div>
      </section>

      <section class="rounded-2xl border p-4">
        <h2 class="text-sm font-semibold text-slate-800">4) Contraindicações absolutas (Sim/Não obrigatório)</h2>
        <div class="mt-2 grid md:grid-cols-2 gap-6">
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">História de carcinoma medular de tireoide (MTC)</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="mtc" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="mtc" value="NÃO"> Não</label>
          </fieldset>
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">Neoplasia endócrina múltipla tipo 2 (MEN2)</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="men2" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="men2" value="NÃO"> Não</label>
          </fieldset>
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">Gestação ou amamentação</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="grav" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="grav" value="NÃO"> Não</label>
          </fieldset>
          <fieldset>
            <legend class="text-sm font-medium text-slate-700">Hipersensibilidade aos componentes</legend>
            <label class="mt-2 inline-flex items-center gap-2"><input required type="radio" name="hiper" value="SIM"> Sim</label>
            <label class="ml-6 inline-flex items-center gap-2"><input required type="radio" name="hiper" value="NÃO"> Não</label>
          </fieldset>
        </div>
      </section>

      <section class="rounded-2xl border p-4">
        <h2 class="text-sm font-semibold text-slate-800">5) Objetivo</h2>
        <label class="block text-sm">
          <span class="text-slate-700">O que você deseja alcançar?</span>
          <textarea required id="objetivo" class="mt-1 w-full rounded-2xl border px-3 py-2 min-h-[110px]" placeholder="Ex.: reduzir 8–10 kg, melhorar relação com alimentação, controlar glicemia, etc."></textarea>
        </label>
      </section>

      <section class="rounded-2xl border p-4">
        <label class="flex items-start gap-3 text-sm">
          <input type="checkbox" id="consent" class="mt-1 h-4 w-4 rounded border" required>
          <span>Confirmo que as informações são verdadeiras e entendo que a prescrição só ocorre após avaliação médica e critérios de segurança.</span>
        </label>
      </section>

      <div class="flex flex-col md:flex-row items-center gap-3">
        <button type="submit" class="rounded-2xl bg-emerald-600 px-6 py-3 text-white font-medium shadow hover:bg-emerald-700">Enviar e agendar</button>
        <a href="./" class="text-sm underline">Voltar ao site</a>
      </div>
      <p class="text-xs text-slate-500 mt-1">Abriremos o WhatsApp com seu resumo e, em seguida, o Calendly.</p>
    </form>
  </main>

  <script>
    var WA='https://wa.me/5519997223709';
    var CAL='https://calendly.com/slinmex?utm_source=site&utm_medium=anamnese';
    function buildWa(text,c){var p=new URLSearchParams(); if(text) p.set('text',text); p.set('source','site'); p.set('medium','pre'); if(c) p.set('campaign',c); return WA+'?'+p.toString();}
    function parseAltura(valor,un){var v=parseFloat(String(valor).replace(',','.')); if(!isFinite(v)||v<=0) return null; if(un==='cm') return v/100; if(un==='m') return v; if(v>3) return v/100; return v;}
    function calcIMC(){
      var peso=parseFloat(String(document.getElementById('peso').value).replace(',','.'));
      var alt=parseAltura(document.getElementById('altura').value, document.getElementById('alturaUn').value);
      var imcEl=document.getElementById('imc');
      if(isFinite(peso)&&peso>0&&alt){imcEl.value=(peso/(alt*alt)).toFixed(1);}else{imcEl.value='';}
    }
    ['peso','altura','alturaUn'].forEach(id=>document.getElementById(id).addEventListener('input',calcIMC));
    function getRadio(name){var el=document.querySelector('input[name="'+name+'"]:checked'); return el?el.value:null;}
    document.getElementById('f').addEventListener('submit', function(e){
      e.preventDefault();
      var nome=document.getElementById('nome').value.trim();
      var idade=document.getElementById('idade').value.trim();
      var peso=document.getElementById('peso').value.trim();
      var altura=document.getElementById('altura').value.trim();
      var un=document.getElementById('alturaUn').value;
      var imc=document.getElementById('imc').value.trim();
      var objetivo=document.getElementById('objetivo').value.trim();
      var has=getRadio('has'), dm=getRadio('dm'), mtc=getRadio('mtc'), men2=getRadio('men2'), grav=getRadio('grav'), hiper=getRadio('hiper');
      if([has,dm,mtc,men2,grav,hiper].some(v=>!v)){ alert('Responda SIM ou NÃO em todas as perguntas.'); return; }
      if(!document.getElementById('consent').checked){ alert('Você precisa confirmar o consentimento.'); return; }
      if(mtc==='SIM'||men2==='SIM'||grav==='SIM'||hiper==='SIM'){ if(!confirm('Atenção: você marcou uma contraindicação absoluta. Deseja mesmo enviar?')){ return; } }
      function alturaFmt(val,un){ var m=parseAltura(val,un); return m? (Math.round(m*100)/100).toString().replace('.',',')+' m' : (val+(un==='cm'?' cm':(un==='m'?' m':''))); }
      var msg=['Pré-anamnese Slinmex','Nome: '+nome+' ('+idade+' anos)','Peso: '+peso+' kg','Altura: '+alturaFmt(altura,un),'IMC: '+(imc||'—'),'HAS: '+has+' | DM: '+dm,'CI – MTC: '+mtc+' | MEN2: '+men2+' | Gestação/amamentação: '+grav+' | Hipersensibilidade: '+hiper,'Objetivo: '+objetivo].join('\n');
      var url=buildWa(msg,'anamnese');
      var win=null; try{win=window.open(url,'_blank');}catch(_){}
      if(!win){window.location.href=url;}
      setTimeout(function(){window.location.href=CAL;},900);
    });
  </script>
</body>
</html>
